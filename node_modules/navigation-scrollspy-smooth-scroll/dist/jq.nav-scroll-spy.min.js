"use strict";var _createClass=function(){function s(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),t}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}!function(t,e,n){if("function"==typeof define&&define.amd)define(["jquery"],e);else if("object"===("undefined"==typeof exports?"undefined":_typeof(exports))){var s=requie("jquery");module.exports=e(s)}else t.navScrollSpy=e(t.jQuery)}(window,function(i){var e="jqNavScrollSpy",s={navItems:".nav-item",scrollContainer:"html,body",spyItems:".spy-item",easing:"swing",speed:550},n=function(){function n(t,e){_classCallCheck(this,n),this._element=t,this.$win=i(window),this.defaults=i.extend({},s,e),this.init()}return _createClass(n,[{key:"init",value:function(){this.$navItems=i(this.defaults.navItems),this.$spyItems=i(this.defaults.spyItems),this.$scrollContainer=i(this.defaults.scrollContainer),this.fixTop=i(this.$spyItems[0]).offset().top,this.spyItemsData=this.getSpyItemsData(),this.spyScroll(),this.clickSwitch()}},{key:"spyScroll",value:function(){this.$win.on("scroll",this.throttle(this.scrollCallBack,100,200))}},{key:"scrollCallBack",value:function(){var t=this.getVisibleElIndex();this.changeNav(this.$navItems[t])}},{key:"getSpyItemsData",value:function(){var e=this,n=[];return this.$spyItems.each(function(t){n[t]=(e.getOffsetTop(t)+e.getOffsetTop(t)+i(e.$spyItems[t]).height())/2}),n}},{key:"getVisibleElIndex",value:function(){var e=this,n=void 0,s=parseInt(this.$win.scrollTop());return i.each(this.spyItemsData,function(t){return e.spyItemsData[0]>=s?!(n=0):e.spyItemsData[t]<=s&&s<=e.spyItemsData[t+1]?(n=t+1,!0):void 0}),n}},{key:"throttle",value:function(n,s,i){var o=void 0,a=this,l=new Date;return function(){var t=arguments,e=new Date;clearTimeout(o),i<=e-l?(n.apply(a,t),l=e):o=setTimeout(n.bind(a),s)}}},{key:"clickSwitch",value:function(){var e=this;this.$navItems.on("click",function(){e.changeNav(this);var t=i(this).index();e.$win.off("scroll"),e.scrollIntoView(t)})}},{key:"changeNav",value:function(t){this.$navItems.removeClass("active"),i(t).addClass("active")}},{key:"scrollIntoView",value:function(t){var e=this,n=parseInt(this.getOffsetTop(t));this.$scrollContainer.is(":animated")||this.$scrollContainer.stop().animate({scrollTop:n},this.defaults.speed,this.defaults.easing,function(){e.spyScroll()})}},{key:"getOffsetTop",value:function(t){return parseInt(i(this.$spyItems[t]).offset().top)-parseInt(this.fixTop)}}]),n}();i.fn.jqNavScrollSpy=function(t){return this.each(function(){i.data(this,"plugin_"+e)&&i.data(this,"plugin_"+e,null),i.data(this,"plugin_"+e,new n(this,t))})}});